<!DOCTYPE html>
<html>
<head>
  <!-- See https://github.com/aaronpdennis/congress-maps -->

  <meta charset='utf-8' />
  <title>GovTrack.us Congressional Districts Map Widget</title>

  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

  <!-- jQuery -->
  <script src="http://code.jquery.com/jquery-1.12.2.min.js" integrity="sha256-lZFHibXzMHo3GGeehn1hudTAP3Sc0uKXBXAzHX1sjtk=" crossorigin="anonymous"></script>

  <!-- Mabpox GL -->
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.17.0/mapbox-gl.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.17.0/mapbox-gl.css' rel='stylesheet'>

  <!-- Mapbox.js (fallback) -->
  <script src='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.js'></script>
  <link href='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.css' rel='stylesheet' />

  <!-- GeoViewport -->
  <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/geo-viewport/v0.1.1/geo-viewport.js'></script>

  <style>
      body { margin:0; padding:0; }
      #map { position:absolute; top:0; bottom:0; width:100%; }
  </style>
</head>
<body>

<!-- Map Container -->
<div id='map'></div>

{% if not hide_footer %}
  <center id="map_footer" style="font-size: 60%; padding: .5em"><a href="https://www.govtrack.us/congress/members" target="_blank">Find your Members of Congress</a> on <a href="https://www.govtrack.us/" target="_blank">GovTrack.us</a></center>
{% endif %}

<script>
{% if not bounds and state %}
var bboxes = {
  "AK": [ -179.231086, 51.175092, 179.859681, 71.441059 ],
  "AL": [ -88.473227, 30.144425, -84.888246, 35.008028 ],
  "AR": [ -94.617919, 33.004106, -89.644395, 36.499749 ],
  "AS": [ -171.141907, -14.601813, -168.101612, -10.997203 ],
  "AZ": [ -114.816591, 31.332177, -109.045172, 37.003725 ],
  "CA": [ -124.482003, 32.528832, -114.131211, 42.009517 ],
  "CO": [ -109.060204, 36.992424, -102.041522, 41.003444 ],
  "CT": [ -73.727775, 40.950943, -71.787239, 42.050587 ],
  "DC": [ -77.119759, 38.791645, -76.909393, 38.995845 ],
  "DE": [ -75.789023, 38.451132, -74.984165, 39.839516 ],
  "FL": [ -87.634896, 24.396308, -79.974306, 31.000968 ],
  "GA": [ -85.605165, 30.355757, -80.751429, 35.000659 ],
  "GU": [ 144.563426, 13.182335, 145.009167, 13.706179 ],
  "HI": [ -178.443593, 18.86546, -154.755792, 28.517269 ],
  "IA": [ -96.639485, 40.37544, -90.140061, 43.501196 ],
  "ID": [ -117.243027, 41.988182, -111.043495, 49.001146 ],
  "IL": [ -91.513079, 36.970298, -87.495199, 42.508481 ],
  "IN": [ -88.097892, 37.771728, -84.784592, 41.761368 ],
  "KS": [ -102.051769, 36.993016, -94.588387, 40.003166 ],
  "KY": [ -89.571203, 36.497058, -81.964788, 39.147732 ],
  "LA": [ -94.043352, 28.855127, -88.758388, 33.019543 ],
  "MA": [ -73.508142, 41.187053, -69.858861, 42.88679 ],
  "MD": [ -79.487651, 37.886605, -74.986282, 39.723037 ],
  "ME": [ -71.083924, 42.917126, -66.885444, 47.459854 ],
  "MI": [ -90.418392, 41.696118, -82.122971, 48.306063 ],
  "MN": [ -97.239196, 43.499361, -89.483385, 49.384358 ],
  "MO": [ -95.774704, 35.995683, -89.098968, 40.61364 ],
  "MP": [ 144.813338, 14.036565, 146.154418, 20.616556 ],
  "MS": [ -91.655009, 30.139845, -88.097888, 34.996099 ],
  "MT": [ -116.049153, 44.357915, -104.039694, 49.0011 ],
  "NC": [ -84.321869, 33.752878, -75.400119, 36.588157 ],
  "ND": [ -104.049265, 45.935072, -96.554411, 49.000692 ],
  "NE": [ -104.053514, 39.999932, -95.30829, 43.001707 ],
  "NH": [ -72.557185, 42.696985, -70.575094, 45.305476 ],
  "NJ": [ -75.563586, 38.788657, -73.88506, 41.357423 ],
  "NM": [ -109.050173, 31.332172, -103.001964, 37.000293 ],
  "NV": [ -120.006473, 35.001857, -114.039461, 42.002207 ],
  "NY": [ -79.76259, 40.477399, -71.777491, 45.015865 ],
  "OH": [ -84.820305, 38.403423, -80.518705, 42.327132 ],
  "OK": [ -103.002455, 33.615787, -94.43101, 37.002312 ],
  "OR": [ -124.703541, 41.991794, -116.463262, 46.299099 ],
  "PA": [ -80.519851, 39.719799, -74.689502, 42.516072 ],
  "PR": [ -67.998751, 17.831509, -65.168503, 18.568002 ],
  "RI": [ -71.907258, 41.095834, -71.088571, 42.0188 ],
  "SC": [ -83.353928, 32.033454, -78.499301, 35.21554 ],
  "SD": [ -104.057879, 42.479686, -96.436472, 45.945377 ],
  "TN": [ -90.310298, 34.982924, -81.6469, 36.678255 ],
  "TX": [ -106.645646, 25.837164, -93.508039, 36.500704 ],
  "UT": [ -114.052885, 36.997657, -109.041572, 42.001702 ],
  "VA": [ -83.675395, 36.540759, -75.166435, 39.466012 ],
  "VI": [ -65.154118, 17.623468, -64.512674, 18.464984 ],
  "VT": [ -73.437905, 42.72685, -71.465039, 45.016659 ],
  "WA": [ -124.848974, 45.543541, -116.91558, 49.002494 ],
  "WI": [ -92.889433, 42.49172, -86.249548, 47.309822 ],
  "WV": [ -82.644591, 37.20154, -77.719519, 40.638801 ],
  "WY": [ -111.054558, 40.994772, -104.052245, 45.005815 ],
  "AK00": [ -179.231086, 51.175092, 179.859681, 71.441059 ],
  "AL01": [ -88.46443, 30.144425, -86.688063, 31.831795 ],
  "AL02": [ -87.427516, 30.992859, -84.999428, 32.769225 ],
  "AL03": [ -86.577799, 32.061708, -84.888246, 34.39592 ],
  "AL04": [ -88.274619, 33.128724, -85.474024, 34.906694 ],
  "AL05": [ -88.202959, 34.304694, -85.583145, 35.008028 ],
  "AL06": [ -87.421989, 32.660117, -85.999748, 34.170984 ],
  "AL07": [ -88.473227, 31.185486, -86.229056, 33.671887 ],
  "AR01": [ -92.951315, 33.004106, -89.644395, 36.49957 ],
  "AR02": [ -93.305885, 34.410912, -91.345279, 35.790823 ],
  "AR03": [ -94.617919, 35.060901, -92.407022, 36.499749 ],
  "AR04": [ -94.485878, 33.005915, -91.450325, 36.30745 ],
  "AS00": [ -171.141907, -14.601813, -168.101612, -10.997203 ],
  "AZ01": [ -114.042876, 32.308701, -109.045172, 37.003725 ],
  "AZ02": [ -111.093531, 31.332502, -109.047612, 32.514188 ],
  "AZ03": [ -114.816591, 31.332177, -110.45172, 33.566289 ],
  "AZ04": [ -114.754681, 32.590799, -110.741149, 37.000533 ],
  "AZ05": [ -111.893596, 33.203336, -111.580626, 33.513433 ],
  "AZ06": [ -112.169478, 33.436633, -111.619185, 33.90112 ],
  "AZ07": [ -112.289902, 33.304647, -111.956309, 33.553133 ],
  "AZ08": [ -112.625777, 33.420885, -112.021568, 33.975455 ],
  "AZ09": [ -112.147914, 33.29026, -111.805274, 33.582551 ],
  "CA01": [ -123.719174, 38.889647, -119.995598, 42.009517 ],
  "CA02": [ -124.482003, 37.814947, -122.347454, 42.001047 ],
  "CA03": [ -123.094216, 38.018421, -121.009477, 39.800561 ],
  "CA04": [ -121.484442, 36.657147, -118.360586, 39.387325 ],
  "CA05": [ -123.056322, 37.96235, -122.050386, 39.094553 ],
  "CA06": [ -121.634158, 38.437574, -121.30883, 38.736302 ],
  "CA07": [ -121.488365, 38.244364, -121.027084, 38.72279 ],
  "CA08": [ -119.651509, 34.003553, -114.131211, 38.713212 ],
  "CA09": [ -121.851325, 37.737445, -120.920665, 38.305785 ],
  "CA10": [ -121.557257, 37.134774, -120.387329, 38.077421 ],
  "CA11": [ -122.441584, 37.739317, -121.580044, 38.067297 ],
  "CA12": [ -122.612285, 37.70823, -122.28178, 37.929824 ],
  "CA13": [ -122.373782, 37.631714, -122.075533, 37.905824 ],
  "CA14": [ -123.173825, 37.311653, -122.081473, 37.823058 ],
  "CA15": [ -122.218717, 37.481783, -121.469214, 37.818927 ],
  "CA16": [ -121.248647, 36.662162, -119.681975, 37.633364 ],
  "CA17": [ -122.11724, 37.27846, -121.781884, 37.573315 ],
  "CA18": [ -122.484046, 36.917196, -121.759306, 37.490081 ],
  "CA19": [ -121.94752, 36.892976, -121.208178, 37.484537 ],
  "CA20": [ -122.105892, 35.788977, -120.213979, 37.085795 ],
  "CA21": [ -120.918731, 34.986008, -118.752519, 37.044505 ],
  "CA22": [ -119.932615, 36.050767, -119.064109, 37.000225 ],
  "CA23": [ -119.915636, 34.630861, -117.616195, 36.744816 ],
  "CA24": [ -121.438176, 33.411024, -118.738618, 35.796655 ],
  "CA25": [ -118.894474, 34.208404, -117.655235, 34.823301 ],
  "CA26": [ -119.636302, 33.163493, -118.652285, 34.561736 ],
  "CA27": [ -118.238808, 34.026994, -117.619281, 34.499246 ],
  "CA28": [ -118.410348, 34.067847, -118.152286, 34.438659 ],
  "CA29": [ -118.508501, 34.15279, -118.315025, 34.381184 ],
  "CA30": [ -118.718625, 34.119038, -118.325341, 34.333767 ],
  "CA31": [ -117.704595, 34.003815, -117.051457, 34.234203 ],
  "CA32": [ -118.072927, 33.989372, -117.747667, 34.194205 ],
  "CA33": [ -118.951721, 33.666649, -118.279686, 34.168619 ],
  "CA34": [ -118.323857, 34.012626, -118.155289, 34.151626 ],
  "CA35": [ -117.828719, 33.924343, -117.352917, 34.14232 ],
  "CA36": [ -117.129842, 33.425888, -114.434949, 34.079884 ],
  "CA37": [ -118.470888, 33.95802, -118.259997, 34.068066 ],
  "CA38": [ -118.167704, 33.822169, -117.96529, 34.064534 ],
  "CA39": [ -118.03736, 33.833496, -117.654885, 34.064219 ],
  "CA40": [ -118.280987, 33.879807, -118.090378, 34.047848 ],
  "CA41": [ -117.558414, 33.714066, -117.035028, 34.034313 ],
  "CA42": [ -117.676286, 33.426574, -116.815938, 34.018906 ],
  "CA43": [ -118.445378, 33.774958, -118.253533, 33.986386 ],
  "CA44": [ -118.352008, 33.659547, -118.146509, 33.974745 ],
  "CA45": [ -117.868754, 33.555566, -117.412987, 33.879235 ],
  "CA46": [ -118.017493, 33.691631, -117.830245, 33.868665 ],
  "CA47": [ -118.678551, 32.75004, -117.920137, 33.854377 ],
  "CA48": [ -118.1259, 33.418975, -117.672529, 33.78757 ],
  "CA49": [ -117.767555, 32.84868, -117.089848, 33.643485 ],
  "CA50": [ -117.262158, 32.633154, -116.08094, 33.533248 ],
  "CA51": [ -117.222513, 32.528832, -114.46289, 33.433814 ],
  "CA52": [ -117.342, 32.585574, -116.905723, 33.114185 ],
  "CA53": [ -117.203854, 32.577965, -116.927715, 32.83109 ],
  "CO01": [ -105.145973, 39.535246, -104.600302, 39.914247 ],
  "CO02": [ -106.652957, 39.129543, -104.943052, 40.99844 ],
  "CO03": [ -109.060204, 36.992424, -104.053921, 41.003444 ],
  "CO04": [ -105.32922, 36.992727, -102.041522, 41.002597 ],
  "CO05": [ -106.599516, 38.257548, -104.051568, 39.56492 ],
  "CO06": [ -105.05424, 39.510546, -104.488906, 40.000628 ],
  "CO07": [ -105.347332, 39.613534, -104.640356, 39.981267 ],
  "CT01": [ -73.201836, 41.544697, -72.463899, 42.042054 ],
  "CT02": [ -72.778412, 41.247795, -71.787239, 42.036895 ],
  "CT03": [ -73.165755, 41.14628, -72.550945, 41.60431 ],
  "CT04": [ -73.727775, 40.950943, -73.072129, 41.489409 ],
  "CT05": [ -73.543416, 41.318095, -72.744742, 42.050587 ],
  "DC00": [ -77.119759, 38.791645, -76.909393, 38.995845 ],
  "DE00": [ -75.789023, 38.451132, -74.984165, 39.839516 ],
  "FL01": [ -87.634896, 30.21309, -85.57821, 30.999547 ],
  "FL02": [ -85.999893, 29.535953, -83.318859, 31.000968 ],
  "FL03": [ -83.49771, 28.914529, -81.66165, 30.642413 ],
  "FL04": [ -82.459793, 30.103748, -81.316712, 30.829924 ],
  "FL05": [ -82.343738, 28.449843, -81.210452, 30.518652 ],
  "FL06": [ -82.056104, 28.788885, -80.663461, 30.252941 ],
  "FL07": [ -81.513619, 28.553112, -80.964453, 28.983864 ],
  "FL08": [ -81.161243, 27.556737, -80.263543, 28.791396 ],
  "FL09": [ -81.677601, 27.64199, -80.861395, 28.600137 ],
  "FL10": [ -81.957805, 27.997637, -81.310099, 28.967593 ],
  "FL11": [ -82.848248, 28.305265, -81.590754, 29.440902 ],
  "FL12": [ -82.908311, 27.978998, -82.054694, 28.478837 ],
  "FL13": [ -82.908909, 27.610273, -82.541818, 28.094436 ],
  "FL14": [ -82.823669, 27.57055, -82.293888, 28.097093 ],
  "FL15": [ -82.505071, 27.797897, -81.746775, 28.323843 ],
  "FL16": [ -82.823029, 26.945255, -82.056497, 27.64668 ],
  "FL17": [ -82.453735, 26.599921, -80.677356, 28.051039 ],
  "FL18": [ -80.885639, 26.691523, -79.974306, 27.558714 ],
  "FL19": [ -82.33504, 25.769452, -81.56218, 26.789551 ],
  "FL20": [ -81.271723, 26.10451, -80.04725, 26.959033 ],
  "FL21": [ -80.379379, 26.214281, -80.103032, 26.685472 ],
  "FL22": [ -80.31424, 26.080877, -79.974728, 26.783261 ],
  "FL23": [ -80.450003, 25.721903, -80.040916, 26.18768 ],
  "FL24": [ -80.352176, 25.759673, -80.126668, 26.009691 ],
  "FL25": [ -81.752385, 25.760584, -80.242353, 26.783611 ],
  "FL26": [ -82.987477, 24.396308, -80.150247, 25.805377 ],
  "FL27": [ -80.469109, 25.29145, -80.042754, 25.860203 ],
  "GA01": [ -83.244554, 30.355757, -80.751429, 32.378768 ],
  "GA02": [ -85.141931, 30.675804, -83.48943, 32.887913 ],
  "GA03": [ -85.33823, 32.478428, -84.040914, 33.812429 ],
  "GA04": [ -84.313073, 33.478959, -83.79012, 33.919177 ],
  "GA05": [ -84.632649, 33.548923, -84.239137, 33.86227 ],
  "GA06": [ -84.571683, 33.833294, -84.097693, 34.186289 ],
  "GA07": [ -84.276822, 33.842845, -83.855066, 34.258903 ],
  "GA08": [ -84.124275, 30.623967, -82.628975, 33.202634 ],
  "GA09": [ -84.657098, 33.951745, -82.564462, 35.000659 ],
  "GA10": [ -84.156554, 32.509473, -82.144869, 34.127518 ],
  "GA11": [ -85.047074, 33.817319, -84.257586, 34.413061 ],
  "GA12": [ -83.226536, 31.363884, -81.177277, 33.596789 ],
  "GA13": [ -84.911059, 33.352465, -84.097471, 33.918844 ],
  "GA14": [ -85.605165, 33.652087, -84.412069, 34.988329 ],
  "GU00": [ 144.563426, 13.182335, 145.009167, 13.706179 ],
  "HI01": [ -158.182049, 21.199238, -157.597288, 21.501697 ],
  "HI02": [ -178.443593, 18.86546, -154.755792, 28.517269 ],
  "IA01": [ -93.497821, 41.50871, -90.154221, 43.501015 ],
  "IA02": [ -94.015492, 40.37544, -90.140061, 42.033596 ],
  "IA03": [ -96.019543, 40.570706, -93.327886, 41.863728 ],
  "IA04": [ -96.639485, 41.504124, -92.080974, 43.501196 ],
  "ID01": [ -117.243027, 41.996011, -114.320303, 49.001146 ],
  "ID02": [ -116.334486, 41.988182, -111.043495, 45.705977 ],
  "IL01": [ -88.136331, 41.378231, -87.573109, 41.84566 ],
  "IL02": [ -88.251995, 40.99456, -87.523661, 41.800622 ],
  "IL03": [ -88.141966, 41.542216, -87.631504, 41.849905 ],
  "IL04": [ -87.920633, 41.786092, -87.634485, 41.970223 ],
  "IL05": [ -87.96916, 41.78912, -87.620201, 42.023717 ],
  "IL06": [ -88.403606, 41.743478, -87.907793, 42.241746 ],
  "IL07": [ -87.91961, 41.764755, -87.582092, 41.921463 ],
  "IL08": [ -88.339402, 41.837727, -87.919993, 42.154352 ],
  "IL09": [ -88.00497, 41.932727, -87.630534, 42.13306 ],
  "IL10": [ -88.198829, 42.03907, -87.74153, 42.493893 ],
  "IL11": [ -88.40469, 41.42298, -87.895256, 41.812826 ],
  "IL12": [ -90.372734, 36.970298, -88.698961, 38.933132 ],
  "IL13": [ -90.936728, 38.661213, -88.123219, 40.539467 ],
  "IL14": [ -88.715572, 41.457034, -87.883971, 42.495637 ],
  "IL15": [ -90.038111, 37.06535, -87.495199, 40.530276 ],
  "IL16": [ -89.868384, 40.398478, -87.525661, 42.500563 ],
  "IL17": [ -91.185295, 40.183945, -88.998777, 42.508481 ],
  "IL18": [ -91.513079, 39.395668, -88.459207, 41.149578 ],
  "IN01": [ -87.526757, 41.162186, -86.641181, 41.761368 ],
  "IN02": [ -86.931018, 40.562649, -85.638587, 41.760697 ],
  "IN03": [ -85.911209, 40.306706, -84.802093, 41.760171 ],
  "IN04": [ -87.531449, 39.44016, -86.012796, 41.286365 ],
  "IN05": [ -86.35661, 39.822283, -85.206508, 40.653667 ],
  "IN06": [ -86.085601, 38.586011, -84.784592, 40.379524 ],
  "IN07": [ -86.327291, 39.632177, -85.951543, 39.886327 ],
  "IN08": [ -88.097892, 37.771728, -86.321191, 40.148422 ],
  "IN09": [ -86.685758, 37.958171, -85.415559, 39.638345 ],
  "KS01": [ -102.051769, 36.993016, -95.945661, 40.003166 ],
  "KS02": [ -96.806742, 36.99859, -94.612156, 40.00093 ],
  "KS03": [ -95.056497, 38.547588, -94.588387, 39.202911 ],
  "KS04": [ -99.570576, 36.997684, -95.958134, 38.261285 ],
  "KY01": [ -89.571203, 36.497058, -84.706122, 37.975514 ],
  "KY02": [ -87.408547, 36.722722, -84.347805, 38.19884 ],
  "KY03": [ -85.947114, 37.99721, -85.472724, 38.380263 ],
  "KY04": [ -85.637861, 37.988677, -82.59348, 39.147732 ],
  "KY05": [ -85.064307, 36.582596, -81.964788, 38.504595 ],
  "KY06": [ -85.170062, 37.515279, -83.242771, 38.608621 ],
  "LA01": [ -91.354272, 28.855127, -88.758388, 30.711995 ],
  "LA02": [ -91.326313, 29.692028, -89.625351, 30.612873 ],
  "LA03": [ -93.929208, 29.239606, -91.082602, 30.497738 ],
  "LA04": [ -94.043352, 30.298817, -91.959844, 33.019543 ],
  "LA05": [ -92.981464, 30.394227, -89.726922, 33.008174 ],
  "LA06": [ -91.823072, 29.411354, -90.154034, 31.020012 ],
  "MA01": [ -73.508142, 41.997595, -71.878827, 42.74594 ],
  "MA02": [ -72.741217, 42.008065, -71.454687, 42.728531 ],
  "MA03": [ -72.081387, 42.310977, -70.998602, 42.833089 ],
  "MA04": [ -71.602221, 41.681909, -70.893454, 42.367893 ],
  "MA05": [ -71.585168, 42.156782, -70.917892, 42.530006 ],
  "MA06": [ -71.33309, 42.384098, -70.502143, 42.88679 ],
  "MA07": [ -71.174798, 42.135634, -70.748802, 42.424155 ],
  "MA08": [ -71.303785, 41.903249, -70.624482, 42.405628 ],
  "MA09": [ -71.201162, 41.187053, -69.858861, 42.195372 ],
  "MD01": [ -77.311562, 37.886605, -74.986282, 39.722207 ],
  "MD02": [ -76.876498, 39.087165, -76.035766, 39.569549 ],
  "MD03": [ -77.156343, 38.879514, -76.349479, 39.478462 ],
  "MD04": [ -77.042022, 38.746124, -76.440546, 39.162999 ],
  "MD05": [ -77.323009, 37.888468, -76.201477, 39.085067 ],
  "MD06": [ -79.487651, 38.991034, -77.074733, 39.723037 ],
  "MD07": [ -77.187113, 39.162209, -76.420896, 39.675882 ],
  "MD08": [ -77.656177, 38.934343, -76.873339, 39.720045 ],
  "ME01": [ -70.989122, 42.917126, -68.484635, 44.586402 ],
  "ME02": [ -71.083924, 43.784985, -66.885444, 47.459854 ],
  "MI01": [ -90.418392, 43.989671, -82.329519, 48.306063 ],
  "MI02": [ -87.147166, 42.729342, -85.54467, 44.167092 ],
  "MI03": [ -85.790662, 42.070366, -84.709556, 43.294405 ],
  "MI04": [ -85.82145, 42.769479, -83.695205, 44.512998 ],
  "MI05": [ -84.168127, 42.780821, -82.249914, 44.514921 ],
  "MI06": [ -87.207774, 41.758946, -85.292058, 42.768937 ],
  "MI07": [ -85.293645, 41.696118, -83.11246, 42.770784 ],
  "MI08": [ -84.603137, 42.421937, -83.091449, 42.888647 ],
  "MI09": [ -83.32514, 42.446012, -82.85514, 42.630507 ],
  "MI10": [ -83.713563, 42.477778, -82.122971, 44.171089 ],
  "MI11": [ -83.682768, 42.262462, -83.086882, 42.709529 ],
  "MI12": [ -83.867348, 42.02793, -83.119228, 42.351916 ],
  "MI13": [ -83.430038, 42.179439, -82.961926, 42.444748 ],
  "MI14": [ -83.439292, 42.286698, -82.749908, 42.699583 ],
  "MN01": [ -96.45347, 43.499361, -91.217287, 44.544006 ],
  "MN02": [ -93.911401, 44.106775, -91.858245, 44.923287 ],
  "MN03": [ -93.769039, 44.776445, -93.19728, 45.246618 ],
  "MN04": [ -93.228119, 44.844091, -92.739527, 45.124533 ],
  "MN05": [ -93.429465, 44.861668, -93.177201, 45.124604 ],
  "MN06": [ -94.640411, 44.634563, -92.745652, 45.824252 ],
  "MN07": [ -97.239196, 43.847653, -93.763662, 49.384358 ],
  "MN08": [ -95.183759, 45.296042, -89.483385, 48.711901 ],
  "MO01": [ -90.482299, 38.531852, -90.117707, 38.891184 ],
  "MO02": [ -90.80608, 38.385114, -90.257413, 38.803018 ],
  "MO03": [ -92.829837, 37.977802, -90.109107, 39.227265 ],
  "MO04": [ -94.617966, 37.067051, -91.629598, 39.610371 ],
  "MO05": [ -94.608457, 38.833006, -92.848825, 39.5272 ],
  "MO06": [ -95.774704, 38.893276, -90.721188, 40.61364 ],
  "MO07": [ -94.618668, 36.497645, -92.764869, 37.829435 ],
  "MO08": [ -92.909347, 35.995683, -89.098968, 38.3774 ],
  "MP00": [ 144.813338, 14.036565, 146.154418, 20.616556 ],
  "MS01": [ -90.313476, 32.919107, -88.097888, 34.996099 ],
  "MS02": [ -91.365614, 31.610068, -89.316408, 34.891945 ],
  "MS03": [ -91.655009, 30.998691, -88.304434, 33.565443 ],
  "MS04": [ -90.040614, 30.139845, -88.384431, 32.053294 ],
  "MT00": [ -116.049153, 44.357915, -104.039694, 49.0011 ],
  "NC01": [ -78.95838, 35.0752, -76.182056, 36.547315 ],
  "NC02": [ -80.053253, 34.880674, -78.529906, 35.966482 ],
  "NC03": [ -78.272221, 34.191184, -75.400119, 36.552093 ],
  "NC04": [ -79.472576, 34.999805, -78.513582, 36.246411 ],
  "NC05": [ -81.918113, 35.607247, -80.03554, 36.588157 ],
  "NC06": [ -80.974619, 35.843749, -78.453487, 36.56235 ],
  "NC07": [ -79.377927, 33.752878, -77.484538, 35.817825 ],
  "NC08": [ -80.726056, 34.29924, -78.805144, 35.926757 ],
  "NC09": [ -81.109416, 34.818208, -80.550297, 35.971652 ],
  "NC10": [ -82.651641, 35.147978, -80.922882, 35.828958 ],
  "NC11": [ -84.321869, 34.986592, -81.328385, 36.28711 ],
  "NC12": [ -80.974643, 35.098263, -79.690843, 36.192812 ],
  "NC13": [ -78.877114, 35.146451, -77.516479, 36.361385 ],
  "ND00": [ -104.049265, 45.935072, -96.554411, 49.000692 ],
  "NE01": [ -97.834536, 40.52277, -95.709974, 42.280417 ],
  "NE02": [ -96.47072, 40.994308, -95.871141, 41.393313 ],
  "NE03": [ -104.053514, 39.999932, -95.30829, 43.001707 ],
  "NH01": [ -71.749421, 42.790312, -70.575094, 44.284783 ],
  "NH02": [ -72.557185, 42.696985, -71.009964, 45.305476 ],
  "NJ01": [ -75.450688, 39.57862, -74.801051, 40.016194 ],
  "NJ02": [ -75.563586, 38.788657, -74.101334, 39.803453 ],
  "NJ03": [ -75.031005, 39.475198, -73.965414, 40.184235 ],
  "NJ04": [ -74.752766, 39.854803, -73.975661, 40.426786 ],
  "NJ05": [ -75.13564, 40.705381, -73.893979, 41.357423 ],
  "NJ06": [ -74.519503, 40.097642, -73.88506, 40.608903 ],
  "NJ07": [ -75.203921, 40.339427, -74.239445, 40.942681 ],
  "NJ08": [ -74.254216, 40.63263, -73.984883, 40.826711 ],
  "NJ09": [ -74.206197, 40.748802, -73.919898, 40.983865 ],
  "NJ10": [ -74.305326, 40.591903, -74.051624, 40.836049 ],
  "NJ11": [ -74.78921, 40.687969, -74.130031, 41.118611 ],
  "NJ12": [ -74.942909, 40.183809, -74.27708, 40.667584 ],
  "NM01": [ -107.19617, 34.259672, -105.29012, 35.461598 ],
  "NM02": [ -109.050173, 31.332172, -103.043478, 35.348446 ],
  "NM03": [ -109.046795, 34.077928, -103.001964, 37.000293 ],
  "NV01": [ -115.280321, 36.071292, -115.025577, 36.20021 ],
  "NV02": [ -120.006473, 38.534792, -114.039461, 42.002207 ],
  "NV03": [ -115.845994, 35.001857, -114.56876, 36.22027 ],
  "NV04": [ -119.43989, 35.963707, -114.042819, 40.12855 ],
  "NY01": [ -73.29666, 40.599407, -71.777491, 41.310387 ],
  "NY02": [ -73.54569, 40.520921, -73.037876, 40.832977 ],
  "NY03": [ -73.827583, 40.724314, -73.21997, 41.01683 ],
  "NY04": [ -73.755701, 40.520505, -73.484375, 40.777324 ],
  "NY05": [ -74.042112, 40.489794, -73.683664, 40.732583 ],
  "NY06": [ -73.913845, 40.691085, -73.734362, 40.781717 ],
  "NY07": [ -74.025724, 40.628644, -73.841046, 40.728475 ],
  "NY08": [ -74.037877, 40.551042, -73.825337, 40.701439 ],
  "NY09": [ -73.988428, 40.58458, -73.901186, 40.684395 ],
  "NY10": [ -74.053229, 40.590982, -73.955275, 40.81626 ],
  "NY11": [ -74.25909, 40.477399, -73.951754, 40.655657 ],
  "NY12": [ -74.002523, 40.711168, -73.906933, 40.80385 ],
  "NY13": [ -73.97113, 40.78265, -73.870241, 40.887212 ],
  "NY14": [ -73.930597, 40.72855, -73.74806, 40.891199 ],
  "NY15": [ -73.933459, 40.789057, -73.838906, 40.867258 ],
  "NY16": [ -73.933808, 40.859194, -73.612885, 41.024019 ],
  "NY17": [ -74.234473, 40.959277, -73.655241, 41.342492 ],
  "NY18": [ -74.762623, 41.115304, -73.482695, 41.749143 ],
  "NY19": [ -75.555476, 41.421657, -73.264957, 43.047423 ],
  "NY20": [ -74.488844, 42.407127, -73.607446, 43.107882 ],
  "NY21": [ -76.734725, 42.932534, -73.241391, 45.015865 ],
  "NY22": [ -76.47303, 41.99779, -74.740093, 43.707018 ],
  "NY23": [ -79.76259, 41.997559, -76.080681, 43.039926 ],
  "NY24": [ -77.387995, 42.618608, -75.896079, 43.708121 ],
  "NY25": [ -77.99729, 43.01696, -77.371364, 43.632084 ],
  "NY26": [ -79.075367, 42.803862, -78.69683, 43.132414 ],
  "NY27": [ -79.312136, 42.437997, -77.245255, 43.634799 ],
  "OH01": [ -84.820305, 39.073281, -83.977005, 39.589493 ],
  "OH02": [ -84.573963, 38.596664, -82.760111, 39.378736 ],
  "OH03": [ -83.174469, 39.808694, -82.767483, 40.136336 ],
  "OH04": [ -84.576928, 40.010188, -82.001941, 41.501189 ],
  "OH05": [ -84.806209, 40.46513, -83.067459, 41.729237 ],
  "OH06": [ -83.102818, 38.403423, -80.518899, 41.062262 ],
  "OH07": [ -82.838538, 40.150976, -81.086686, 41.478655 ],
  "OH08": [ -84.81945, 39.292284, -83.509933, 40.523684 ],
  "OH09": [ -83.694237, 41.352846, -81.677948, 41.963315 ],
  "OH10": [ -84.485653, 39.512563, -83.252435, 39.92297 ],
  "OH11": [ -81.788366, 41.024758, -81.438123, 42.096402 ],
  "OH12": [ -83.249626, 39.755572, -81.691104, 40.843412 ],
  "OH13": [ -81.650647, 40.886299, -80.518705, 41.367326 ],
  "OH14": [ -81.670551, 41.12395, -80.518992, 42.327132 ],
  "OH15": [ -84.006782, 39.027674, -81.586132, 40.111486 ],
  "OH16": [ -82.129334, 40.666664, -81.09855, 41.482509 ],
  "OK01": [ -96.29809, 35.76516, -95.207918, 36.99946 ],
  "OK02": [ -96.969971, 33.615787, -94.43101, 36.99965 ],
  "OK03": [ -103.002455, 34.337762, -96.000281, 37.002312 ],
  "OK04": [ -99.23806, 33.717044, -96.406007, 35.493205 ],
  "OK05": [ -97.674058, 34.856782, -96.441171, 35.72598 ],
  "OR01": [ -124.159546, 45.074698, -122.673945, 46.299099 ],
  "OR02": [ -123.457657, 41.991794, -116.463262, 46.001065 ],
  "OR03": [ -122.79113, 45.151628, -121.679473, 45.656438 ],
  "OR04": [ -124.703541, 41.995096, -121.767375, 44.794447 ],
  "OR05": [ -124.187674, 44.274761, -121.651714, 45.783485 ],
  "PA01": [ -75.418298, 39.815948, -74.973981, 40.065007 ],
  "PA02": [ -75.349457, 39.919834, -75.12632, 40.092907 ],
  "PA03": [ -80.519851, 40.52488, -79.210197, 42.516072 ],
  "PA04": [ -77.471085, 39.719799, -76.23869, 40.33507 ],
  "PA05": [ -80.266156, 40.263005, -77.143712, 42.269327 ],
  "PA06": [ -76.477606, 39.901638, -75.361042, 40.539247 ],
  "PA07": [ -76.184057, 39.722182, -75.127808, 40.417846 ],
  "PA08": [ -75.558028, 40.048595, -74.721519, 40.60858 ],
  "PA09": [ -80.117101, 39.71987, -77.454109, 40.911346 ],
  "PA10": [ -77.913929, 40.185362, -74.689502, 42.002134 ],
  "PA11": [ -77.627552, 39.944077, -75.49599, 41.651825 ],
  "PA12": [ -80.519228, 39.807248, -78.556958, 40.938867 ],
  "PA13": [ -75.413047, 39.998895, -74.955763, 40.274395 ],
  "PA14": [ -80.177883, 40.276324, -79.712477, 40.626701 ],
  "PA15": [ -76.786163, 40.12007, -75.176803, 40.8622 ],
  "PA16": [ -76.72162, 39.721131, -75.637066, 40.397962 ],
  "PA17": [ -76.701624, 40.495434, -74.966759, 41.586382 ],
  "PA18": [ -80.519497, 39.721002, -79.088656, 40.588038 ],
  "PR00": [ -67.998751, 17.831509, -65.168503, 18.568002 ],
  "RI01": [ -71.606255, 41.307355, -71.088571, 42.0188 ],
  "RI02": [ -71.907258, 41.095834, -71.325667, 42.013371 ],
  "SC01": [ -81.016341, 32.07689, -79.26183, 33.366273 ],
  "SC02": [ -82.012534, 33.092852, -80.692965, 34.26876 ],
  "SC03": [ -83.353928, 33.532096, -81.471972, 35.085699 ],
  "SC04": [ -82.764464, 34.580175, -81.711566, 35.21554 ],
  "SC05": [ -82.048414, 33.643911, -80.000594, 35.189687 ],
  "SC06": [ -81.614033, 32.033454, -79.317041, 34.181361 ],
  "SC07": [ -80.564088, 33.049793, -78.499301, 34.817482 ],
  "SD00": [ -104.057879, 42.479686, -96.436472, 45.945377 ],
  "TN01": [ -83.794275, 35.562684, -81.6469, 36.616213 ],
  "TN02": [ -84.584472, 35.460729, -83.255292, 36.60081 ],
  "TN03": [ -85.475593, 34.982924, -83.667408, 36.603444 ],
  "TN04": [ -87.29719, 34.98302, -84.61897, 36.10061 ],
  "TN05": [ -87.566798, 35.959186, -86.515589, 36.455711 ],
  "TN06": [ -87.150371, 35.28918, -84.659082, 36.652443 ],
  "TN07": [ -89.198288, 34.991899, -86.600032, 36.678255 ],
  "TN08": [ -90.179265, 34.993754, -87.99092, 36.507233 ],
  "TN09": [ -90.310298, 34.994188, -89.681188, 35.39662 ],
  "TX01": [ -95.594541, 31.026088, -93.59497, 33.01345 ],
  "TX02": [ -95.645793, 29.686729, -95.021811, 30.167214 ],
  "TX03": [ -96.843984, 32.984021, -96.359748, 33.36421 ],
  "TX04": [ -96.945126, 32.535936, -94.04273, 33.962674 ],
  "TX05": [ -96.765657, 31.42571, -94.865857, 32.962598 ],
  "TX06": [ -97.388819, 31.796191, -96.050758, 32.803286 ],
  "TX07": [ -95.773835, 29.647875, -95.408402, 29.953075 ],
  "TX08": [ -96.27266, 29.996702, -94.829719, 31.592886 ],
  "TX09": [ -95.715452, 29.512979, -95.271976, 29.737117 ],
  "TX10": [ -97.926591, 29.247804, -95.504963, 30.50216 ],
  "TX11": [ -103.064788, 30.286653, -97.615274, 33.007913 ],
  "TX12": [ -98.066836, 32.553559, -97.185985, 33.273666 ],
  "TX13": [ -103.043264, 32.996373, -96.943339, 36.500704 ],
  "TX14": [ -95.874028, 28.764837, -93.814351, 30.189106 ],
  "TX15": [ -98.954771, 26.064099, -97.574639, 29.858208 ],
  "TX16": [ -106.645646, 31.659772, -105.994756, 32.002533 ],
  "TX17": [ -97.773458, 30.295549, -95.657247, 32.012526 ],
  "TX18": [ -95.563703, 29.666035, -95.21262, 30.074563 ],
  "TX19": [ -103.064968, 32.081203, -98.420436, 34.74819 ],
  "TX20": [ -98.788192, 29.318802, -98.464261, 29.627018 ],
  "TX21": [ -100.063741, 29.43891, -97.707126, 30.502095 ],
  "TX22": [ -96.088912, 29.26259, -95.102989, 29.78828 ],
  "TX23": [ -106.346973, 28.19277, -98.35093, 32.08724 ],
  "TX24": [ -97.212769, 32.778323, -96.803375, 33.086456 ],
  "TX25": [ -98.569645, 29.912844, -96.719114, 32.571838 ],
  "TX26": [ -97.39848, 32.839371, -96.83411, 33.43045 ],
  "TX27": [ -97.942146, 27.558358, -95.49565, 30.21211 ],
  "TX28": [ -100.212189, 26.111523, -97.956081, 29.59456 ],
  "TX29": [ -95.41718, 29.596165, -95.127159, 29.96199 ],
  "TX30": [ -97.038385, 32.545282, -96.529987, 32.860089 ],
  "TX31": [ -98.049886, 30.402843, -97.070188, 31.320202 ],
  "TX32": [ -96.847665, 32.784487, -96.456507, 33.047577 ],
  "TX33": [ -97.405065, 32.602683, -96.809803, 32.911158 ],
  "TX34": [ -98.235497, 25.837164, -96.976378, 29.60772 ],
  "TX35": [ -98.547343, 29.318858, -97.49135, 30.382521 ],
  "TX36": [ -95.21867, 29.49624, -93.508039, 31.186627 ],
  "UT01": [ -114.042029, 39.461766, -109.047767, 42.001702 ],
  "UT02": [ -114.052885, 36.999975, -109.885124, 41.089278 ],
  "UT03": [ -111.914645, 36.997657, -109.041572, 40.712862 ],
  "UT04": [ -112.354467, 39.314483, -111.247078, 40.726801 ],
  "VA01": [ -77.813568, 37.091894, -76.134941, 38.810395 ],
  "VA02": [ -76.586375, 36.550453, -75.166435, 38.027934 ],
  "VA03": [ -77.525051, 36.786062, -76.206398, 37.641703 ],
  "VA04": [ -78.240748, 36.543789, -76.065553, 37.691687 ],
  "VA05": [ -80.235455, 36.540759, -77.626375, 39.013841 ],
  "VA06": [ -80.140855, 37.137036, -78.005341, 39.102828 ],
  "VA07": [ -78.369797, 37.354867, -76.741984, 38.698923 ],
  "VA08": [ -77.245756, 38.605617, -77.032143, 38.942635 ],
  "VA09": [ -83.675395, 36.542282, -79.612168, 37.960658 ],
  "VA10": [ -78.54409, 38.696211, -77.119759, 39.466012 ],
  "VA11": [ -77.468233, 38.529119, -77.140593, 39.003002 ],
  "VI00": [ -65.154118, 17.623468, -64.512674, 18.464984 ],
  "VT00": [ -73.437905, 42.72685, -71.465039, 45.016659 ],
  "WA01": [ -123.32242, 47.395345, -120.654676, 49.002494 ],
  "WA02": [ -123.274009, 47.776814, -122.101352, 48.831338 ],
  "WA03": [ -124.181206, 45.543541, -119.866265, 46.881925 ],
  "WA04": [ -121.523938, 45.835962, -117.958856, 49.000705 ],
  "WA05": [ -118.979519, 45.995375, -116.91558, 49.000843 ],
  "WA06": [ -124.848974, 46.790956, -122.420842, 48.499784 ],
  "WA07": [ -122.541068, 47.317313, -122.226235, 47.861617 ],
  "WA08": [ -122.560493, 46.727986, -119.859708, 48.550725 ],
  "WA09": [ -122.510643, 47.2333, -122.06824, 47.660788 ],
  "WA10": [ -123.202066, 46.802398, -122.201792, 47.257562 ],
  "WI01": [ -89.080723, 42.49172, -87.019863, 43.033039 ],
  "WI02": [ -90.430042, 42.496009, -88.918672, 43.642234 ],
  "WI03": [ -92.808415, 42.507173, -89.223035, 45.209572 ],
  "WI04": [ -88.070876, 42.842146, -87.069419, 43.192581 ],
  "WI05": [ -89.013588, 42.812053, -87.948333, 43.557416 ],
  "WI06": [ -89.785809, 43.140381, -86.923403, 44.328825 ],
  "WI07": [ -92.889433, 43.885765, -88.058246, 47.309822 ],
  "WI08": [ -89.224811, 43.891511, -86.249548, 45.795637 ],
  "WV01": [ -81.756384, 38.717898, -78.657073, 40.638801 ],
  "WV02": [ -82.064562, 37.967209, -77.719519, 39.695979 ],
  "WV03": [ -82.644591, 37.20154, -79.617906, 39.029818 ],
  "WY00": [ -111.054558, 40.994772, -104.052245, 45.005815 ],
};
{% endif %}

// Mapbox configuration
var accessToken = 'pk.eyJ1IjoiZ292dHJhY2siLCJhIjoiY2lua2J1cmwzMHhyNnVrbHl3bmx4ZnZneiJ9.Wld_AdbKwOgmF2ZXn2SPmw';
var styleURL = 'mapbox://styles/govtrack/cinv1pz1p0005b2mc0loc1ix9';

{% if not hide_footer %}
function resize_map() {
  var map = $("#map");
  var footer = $("#map_footer");
  map.css({ position: "static", height: $(window).innerHeight() - footer.outerHeight() });
}
resize_map();
$(window).resize(resize_map);
{% endif %}

var state = {% if state %}"{{state|upper|escapejs}}"{% else %}null{% endif %};
var district = {% if district %}parseInt("{{district|upper|escapejs}}"){% else %}null{% endif %};
{% if district %}if (district < 10) district = "0" + district; else district = "" + district;{% endif %}

{% if bounds %}
{# user-specified #}
var bbox = "{{bounds|escapejs}}".split(',');
  bbox = [parseFloat(bbox[0]), parseFloat(bbox[3]), parseFloat(bbox[2]), parseFloat(bbox[1])];
{% else %}
var bbox;
if (state && district)
  bbox = bboxes[state + district]
else if (state)
  bbox = bboxes[state];
else
  bbox = [-128.8, 23.6, -65.4, 50.2]; // United States
{% endif %}

var viewport = geoViewport.viewport(bbox, [window.innerWidth/2, window.innerHeight/2])

// Checks for support of Mapbox GL. Works with most modern browsers.
if (mapboxgl.supported({ failIfMajorPerformanceCaveat: true })) {

  // Initialize the map
  mapboxgl.accessToken = accessToken;
  var map = new mapboxgl.Map({
      container: 'map',
      style: styleURL,
      center: viewport.center,
      zoom: viewport.zoom
  });

  // Once map is fully loaded...
  map.on('load', function() {
    // set controls
    map.addControl(new mapboxgl.Navigation({ position: 'bottom-left' }));
    map.touchZoomRotate.disableRotation();

    // Create a filter for the selected state & district.
    var filter = ['all'];
    if (state) filter.push(['==', 'state', state]);
    if (state && district) filter.push(['==', 'number', district]);

    // For each district color layer in the map, apply some filters...
    for (var i = 1; i <= 5; i++) {
      // The filter that filters based on color is the one we want to preserve
      // If there are already multiple filters applied, it will be the last one
      var exisitingFilter = map.getFilter('districts_' + i);
      if (exisitingFilter[0] === 'all') {
        exisitingFilter = exisitingFilter[exisitingFilter.length - 1];
      }

      // Add the existing color filter
      var layerFilter = filter.concat([exisitingFilter]);

      // Set new layer filter for each district layer in the map
      map.setFilter('districts_' + i, layerFilter);
      map.setFilter('districts_' + i + '_boundary', layerFilter);
      map.setFilter('districts_' + i + '_label', layerFilter);
    }

    // Create a similar filter for the boundary lines
    map.setFilter('districts_boundary_line', filter);


    {% if request.GET.marker_lat and 0 %}
        var loc = new google.maps.LatLng("{{request.GET.marker_lat|escapejs}}", "{{request.GET.marker_lng|escapejs}}");
        map.setCenter(loc);
        var marker = new google.maps.Marker({
            map: map, 
            position: loc
        });
    {% endif %}

  });

} else {

  // If Mapbox GL is not supported
  // Log this information to the console (perhaps an alert that the website is not fully featured would be better?)
  console.log('Mapbox GL not supported');

  // Initialize the map
  L.mapbox.accessToken = accessToken;
  var map = L.mapbox.map('map').setView([viewport.center[1], viewport.center[0]], viewport.zoom);
  L.mapbox.styleLayer(styleURL).addTo(map);
}

</script>

</body>
</html>

