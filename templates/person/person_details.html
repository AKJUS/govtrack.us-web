{% extends "master.html" %}
{% load humanize persontags video %}

{% block title %}{{person}} - GovTrack.us{% endblock %}

{% block meta_description %}
        {% if not active_role %}Former{% endif %}
        {{ role.get_role_type_display }}, {{ role.get_state_display }}
{% endblock %}

{% block extra_js %}
<script type='text/javascript' src='{{ MEDIA_URL }}jwplayer/jwplayer.js'></script>
<script type="text/javascript" src="{{ MEDIA_URL }}fancybox/jquery.fancybox-1.3.4.pack.js"></script>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ MEDIA_URL }}fancybox/jquery.fancybox-1.3.4.css" type="text/css" media="screen" />
{% endblock %}

{% block crumbs %}
Congress > Members of Congress
{% endblock %}

{% block body %}
<div class="person-details">
<div class="col_left">
    <h1>{{ person }}</h1>
    {% if role %}
    <div class="role-details">
        {% if not active_role %}Former{% endif %}
        {{ role.get_role_type_display }} for
	   {{ role.get_state_display }}{% if role.district == 0 %}'s At-Large District {% endif %}{% if role.district > 0 %}'s {{role.district|ordinal}} District {% endif %}
	   ({{ role.party }})
    </div>
    {% if role.website %}
    <p><a href="{{ role.website }}" target="_blank"><tt>{{ role.website }}</tt></a></p>
    {% endif %}
    {% endif %}
    
    {% if photo %}
    <div class="photo">
        <img src="{{ photo }}" alt="Photo" style="border: 1px solid black" />
    </div>
    {% endif %}
    <div class="description">
        <table width="100%">
            {% if role %}
            <tr>
                <td>State:</td>
                <td>{{ role.get_state_display }} [<a href="/congress/members/{{ role.state }}">district map</a>]</td>
            </tr>
            {% endif %}
            {% if role %}
            <tr>
                <td>Party:</td>
                <td>{{ role.party }}</td>
            </tr>
            {% endif %}
            <tr>
                <td>Birthday:</td>
                <td>{{ person.birthday|date:"F d, Y" }} / {{ person.get_age }} years old</td>
            </tr>
        </table>
    </div>
    <div class="clear"></div>


    <h2>Elected Positions</h2>
    <table>
        <thead>
            <tr>
                <th>When</th>
                <th>Role</th>
                <th>Representing</th>
            </tr>
        </thead>
        {% for role in person.roles_condensed %}
        <tr>
            <td>{{ role.startdate|date:"Y" }}-{{ role.enddate|date:"Y" }}</td>
            <td>{{ role.get_role_type_display }}</td>
            <td>{{ role.get_state_display }}{% if role.district == 0 %}'s At-Large District {% endif %}{% if role.district > 0 %}'s {{role.district|ordinal}} District {% endif %}</td>
        </tr>
        {% endfor %}
    </table>
    {% if analysis_data %}
    <h2>Sponsorship Analysis</h2>
    <div class="analysis">
        {% if analysis_data.image %}
        <div class="graph">
            <img src="{{ analysis_data.image }}" />
        </div>
        {% endif %}
        <div class="details">
            {{ person.lastname }} is a {{ analysis_data.description }} according to GovTrack's own analysis of bill sponsorship. The graph to the left shows {{ person.lastname }} as a large dot among {{person|hisher}} peers, with the left-right axis indicating ideology and the up-down axis representing legislative leadership. <a href="#" onclick="$('#sponsorshipanalysis_info').slideDown(); $(this).fadeOut(); return false;">More...</a>

            <p id="sponsorshipanalysis_info" style="color: grey; display: none">These labels come from the <a href="#">Political Spectrum & Legislative Leadership statistical analysis</a> that we have carried out. The statistical analysis is blind to party affiliation and the content of bills. From there, we have divided the Members of Congress into far-left/right, rank-and-file, and centrist; and leader, rank-and-file, or lonely (i.e. follower) by 20<sup>th</sup> and 80<sup>th</sup> percentiles.</p>
        </div>
        <div class="clear"> </div>
	</div>
    {% endif %}
    
    <h2>Bills Sponsored...</h2>
    
    <h2>Committee Assignments</h2>
    ...
</div>

<div class="col_right">
<div class="sidebox">
	<h2>Happening Now</h2>
    <p id="latest-tweet" style="display: none">
        Twitter: <span class="content"></span>
    </p>
    <script type="text/javascript">
        function renderLatestTweet(username) {
            var url = 'http://twitter.com/statuses/user_timeline/' + username + '.json';
            $.get(url, {count: 1}, function(data) {
                if (data.length) {
                    var tweet = data[0];
                    var created = new Date(tweet.created_at);
                    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug',
                                  'Sep', 'Oct', 'Nov', 'Dec'];
                    var datestr = months[created.getMonth()] + '. ' + created.getDate() + ', ' + created.getFullYear();
                    var content = tweet.text;
                    $('#latest-tweet').show().find('.content').text(datestr + ' ' + content).show();
                }
            }, 'jsonp');
        }
        {% if person.twitterid %}
            renderLatestTweet('{{ person.twitterid }}');
        {% endif %}
    </script>
    {% if recent_video %}
        {% video recent_video %}
    {% endif %}
</div>
<div class="sidebox">
	<h2>Media</h2>

    <div class="recent-video-list">
    {% for video in videos %}
        {% video video %}
        {% if forloop.counter|divisibleby:2 %}<div class="clear"></div>{% endif %}
    {% endfor %}
    </div>
    <div class="clear"></div>

    {% comment %}
    {% if sunlight_video %}
    <h3>Sunlightlabs API video</h3>
    {% with sunlight_video as video %}
        <div>{{ video.published|date }}</div>
        <script type='text/javascript' src='{{ MEDIA_URL }}jwplayer/jwplayer.js'></script>
        <div id='mediaplayer2'></div>
        <script type="text/javascript">
            jwplayer("mediaplayer2").setup({
                flashplayer: "{{ MEDIA_URL }}jwplayer/player.swf",
                file: "{{ video.url }}",
                width: 200,
                height: 150,
                events: {
                    onPlay: function() {
                        this.resize(320, 240);
                    },
                    onPause: function() {
                        this.resize(200, 150);
                    }
                }
            });
        </script>
    {% endwith %}
    {% endif %}
    {% endcomment %}
</div>
<div class="sidebox">
	<h2>Tracked Events</h2>
	<p>...</p>
</div>
</div>

</div>

{% endblock %}

