{% load humanize %}
{% load govtrack_utils %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>{{bill.title_no_number}} ({{bill.display_number_no_congress_number}}{% if not bill.is_current%}, {{bill.congress|ordinal}} Congress{% endif %}) &ndash; Bill Widget &ndash; GovTrack.us</title>

	<link rel="stylesheet" href="{{ MEDIA_URL }}css/all-min.css?20130318" media="all" />

	<style type="text/css">
		:root {
			max-width: 100%; /* fallback max-width for old browsers */
			max-height: 100%; /* fallback max-height for old browsers */
			max-width: 100vw;
			max-height: 100vh;
		}

		#wrapper {
			margin: 1em; /* fallback margin for old browsers */
			font-size: 14px; /* fallback font-size for old browsers */
			width: 98vw;
			height: 98vh;
			margin: auto !important;
			font-size: 1.5vw;
			overflow-y: auto;
			background-color: rgba( 255, 255, 255, 0.95 );
			border-radius: 1vmin;
		}

		header {
			margin: 1em 2em;
		}

		header > a > img {
			height: 33px; /* fallback height for old browsers */
			height: 11vmin;
		}

		.summary-box {
			position: auto;
			margin: 0em 1em 1em;
			padding: 1em;
			font-size: 200%;
			line-height: 1.5 !important;
			min-height: min-content;
		}

		.summary-box h1 {
			font-size: 2em;
			overflow: hidden;
			text-overflow: ellipsis;
			font-size: 125%;
		}

		.summary-box dt {
			width: 25%;
			padding-right: 1em;
			text-align: right;
		}

		@supports ( display: flex ) {
			body {
				display: flex;
				flex-direction: column;
				justify-content: center;
				width: 100vw;
				height: 100vh;
			}

			#wrapper {
				display: flex;
				flex-direction: column;
				justify-content: center;
			}

			#wrapper .summary-box {
				align-self: stretch;
			}
		}
	</style>
</head>
<body>
	<div id="wrapper">
		<header>
			{% comment %} XXX: This should use a variable to specify the root page URL. {% endcomment %}
			<a href="http://www.govtrack.us/" target="_blank"><img src="{{ MEDIA_URL }}images/logo.gif" height="33px" alt="Powered by GovTrack.us" /></a>
		</header>

		<div class="summary-box">
			<h1><a href="{{bill.get_absolute_url}}" target="_blank">{{bill.display_number_no_congress_number}}</a>{% if not bill.is_current%} ({{bill.congress|ordinalhtml}}){% endif %}: {{bill.title_no_number}}</h1>

			{% if bill.congress >= 93 %}
			<dl>
				<dt>Introduced:</dt>
				<dd>{{bill.introduced_date}} ({{bill.congress|ordinalhtml}} Congress, {{congressdates.0|date:"Y"}}&ndash;{{congressdates.1|date:"Y"}})</dd>

				<dt>Sponsor:</dt>
				{% if bill.sponsor %}
					<dd><a class="name" href="{{bill.sponsor.get_absolute_url}}" target="_blank">{{sponsor_name}}</a></dd>
				{% else %}
					<dd>(bill introduced by rule or other special circumstance)</dd>
				{% endif %}

				<dt>Status:</dt>
				<dd>
				{% if not dead %}
					{{bill.get_current_status_display}}
				{% else %}
					Died ({{bill.get_current_status_display}})
				{% endif %}
				</dd>

				{% with bill.slip_law_number as sln %}
				{% if sln %}
					<dt>Slip Law:</dt>
					<dd>This bill became {{bill.slip_law_number}}.</dd>
				{% endif %}
				{% endwith %}

				{% if bill.docs_house_gov_postdate and bill.docs_house_gov_postdate.date > bill.current_status_date %}
				<dt>Schedule:</dt>
				<dd>The House Majority Leader indicated on {{bill.docs_house_gov_postdate|date:"DATE_FORMAT"}} that this {{bill.noun}} may be considered in the week ahead.</dd>
				{% endif %}

				{% if bill.senate_floor_schedule_postdate and bill.senate_floor_schedule_postdate.date > bill.current_status_date %}
				<dt>Schedule:</dt>
				<dd>This {{bill.noun}} was added to the Senate&rsquo;s floor schedule for the next legislative day on {{bill.senate_floor_schedule_postdate|date:"DATE_FORMAT"}}.</dd>
				{% endif %}

				{% if bill.get_upcoming_meetings|length %}
				<dt>Schedule:</dt>
				<dd>
					<div>This {{bill.noun}} is scheduled for the following committee meetings:</div>
					{% for m in bill.get_upcoming_meetings %}
						<div>{{m.when}} &mdash; {{m.committee.fullname}}</div>
					{% endfor %}
				</dd>
				{% endif %}
				{% with text as text_info %}
				<dt>Text:</dt>
				<dd>
					{% if not text_info %}
						<p>Text not yet available.</p>
					{% elif text_info.has_html_text %}
						<p><a href="{{bill.get_absolute_url}}/text" target="_blank">Read {{bill.noun|capfirst}} Text &raquo;</a></p>
						<p class="small">Last updated {{text_info.docdate}}.<br/>{{text_info.numpages}}</p>
					{% else %}
						<a href="{{text_info.gpo_pdf_url}}" target="_blank">PDF</a> ({{text_info.docdate}})
					{% endif %}
				</dd>
				{% endwith %}
			</dl>
			{% else %}
			<dl>
				<dt>Introduced:</dt>
				<dd>{{bill.congress|ordinalhtml}} Congress ({{congressdates.0|date:"Y"}}&ndash;{{congressdates.1|date:"Y"}})</dd>

				<dt>Status:</dt>
				<dd>Enacted or Agreed to on {{bill.current_status_date}}</dd>

				<dt>Slip Law:</dt>
				<dd>This bill became {{bill.slip_law_number}}.</dd>
			</dl>
			<p>Limited information is available for bills and resolutions from 1957-1972.</p>
			{% endif %}
		</div><!-- /summary-box -->

	</div><!-- /wrapper -->

</body>
</html>
